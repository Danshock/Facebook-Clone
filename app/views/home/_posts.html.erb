<!-- Only signed in users can see posts -->
<% if user_signed_in? %>
<h3>All Posts</h3>
<table>
  <thead>
    <tr>
      <th>Author</th>
      <th>Message</th>
      <th>Posted on</th>
    </tr>
    </tr>
  </thead>

  <tbody>
    <% @posts.each do |post| %>
      <tr>
        <td> <%= post.user.first_name %> </td>
        <td> "<%= post.body %>" </td>
        <td> <%= post.created_at %> </td>
        <td> <%= button_to 'Like', post_likes_path(post), method: :post %> </td>
        <td> <%= post.likes.count %> <%= (post.likes.count) == 1 ? 'Like' : 'Likes' %>
        </td>

        <!-- Allow only the author to edit and delete their posts -->
        <% if post.user_id == current_user.id %>
          <td> <%= link_to "Edit", edit_post_path(post) %> 
          </td>
          <td> <%= link_to "Delete", post_path(post), method: :delete %> 
          </td>
      </tr>
        <% end %>
  <% end %>
  </tbody>
</table>
<% end %>